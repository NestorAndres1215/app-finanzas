<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${transaction.id} != null ? 'Editar Transacción' : 'Nueva Transacción'">Transacción</title>

    <!-- TAILWIND CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FONT AWESOME -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Configuración de colores premium -->
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: '#7c3aed',
                'primary-dark': '#6d28d9',
                ingreso: '#10b981',
                egreso: '#ef4444',
              }
            }
          }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen">

<!-- SIDEBAR PREMIUM -->
<div th:replace="~{sidebar :: sidebar}"></div>

<!-- CONTENIDO PRINCIPAL -->
<main class="ml-64 p-8">
    <div class="max-w-2xl mx-auto">

        <!-- TÍTULO DINÁMICO -->
        <h2 class="text-3xl font-bold text-center text-gray-800 mb-8 flex items-center justify-center gap-3">
            <i class="fas fa-exchange-alt text-primary"></i>
            <span th:text="${transaction.id} != null ? 'Editar Transacción' : 'Nueva Transacción'"></span>
        </h2>

        <!-- CARD DEL FORMULARIO -->
        <div class="bg-white rounded-2xl shadow-xl p-8 border border-purple-100">

            <!-- FORMULARIO SIN VALIDACIÓN -->
            <form th:action="@{/transactions/guardar}"
                  th:object="${transaction}"
                  method="post"
                  class="space-y-6">

                <!-- ID OCULTO -->
                <input type="hidden" th:field="*{id}" />

                <!-- MONTO -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                        <i class="fas fa-coins text-yellow-500 mr-2"></i>
                        Monto (S/)
                    </label>
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-600 font-bold">S/</span>
                        <input type="number"
                               step="0.01"
                               th:field="*{monto}"
                               placeholder="0.00"
                               class="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent transition-all">
                    </div>
                </div>

                <!-- DESCRIPCIÓN -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                        <i class="fas fa-align-left text-blue-500 mr-2"></i>
                        Descripción
                    </label>
                    <input type="text"
                           th:field="*{descripcion}"
                           placeholder="Ej: Compra de materiales"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent transition-all">
                </div>

                <!-- CATEGORÍA -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                        <i class="fas fa-tags text-green-500 mr-2"></i>
                        Categoría
                    </label>
                    <select th:field="*{categoriaId}"
                            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent transition-all appearance-none bg-white"
                            style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%22//www.w3.org/2000/svg%22%20width%3D%2212%22%20height%3D%228%22%3E%3Cpath%20fill%3D%22%236b7280%22%20d%3D%22M0%200l6%206%206-6%22/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: right 1rem center; background-size: 12px;">
                        <option value="">-- Seleccione una categoría --</option>
                        <option th:each="cat : ${categories}"
                                th:value="${cat.id}"
                                th:text="${cat.nombre}">
                        </option>
                    </select>
                </div>

                <!-- BOTONES -->
                <div class="flex gap-4 pt-4">
                    <button type="submit"
                            class="flex-1 py-3 bg-gradient-to-r from-primary to-purple-700 text-white font-bold rounded-xl hover:from-primary-dark hover:to-purple-800 transform hover:scale-105 transition-all duration-200 shadow-lg flex items-center justify-center gap-2">
                        <i class="fas fa-save"></i>
                        <span th:text="${transaction.id} != null ? 'Actualizar' : 'Guardar'"></span>
                    </button>
                    <a th:href="@{/transactions}"
                       class="flex-1 py-3 bg-gray-500 hover:bg-gray-600 text-white font-bold rounded-xl text-center transform hover:scale-105 transition-all duration-200 shadow-lg flex items-center justify-center gap-2">
                        <i class="fas fa-arrow-left"></i>
                        Cancelar
                    </a>
                </div>
            </form>
        </div>

        <!-- BADGE PRO -->
        <div class="text-center mt-8">
        <span class="inline-block bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-xs font-bold px-4 py-1 rounded-full shadow-lg animate-pulse">
          PRO
        </span>
        </div>
    </div>
</main>

</body>
</html>